(function(t){function e(e){for(var o,i,a=e[0],l=e[1],c=e[2],d=0,f=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},s={app:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},2506:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=n("5f5b");n("ab8b"),n("2dd8");o["default"].use(s["a"]);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column align-items-center",attrs:{id:"app"}},[2==t.joined?n("Box",{staticClass:"px-5",attrs:{cols:t.cols,rows:t.rows,socket:t.socket,player:t.player,roomID:t.roomID,name:t.name}}):1==t.player?n("div",{staticClass:"d-inline-flex flex-column align-items-center m-5"},[t.roomID?n("div",[n("p",{staticClass:"font-weight-bold text-muted"},[t._v("Waiting for player 2")]),n("b-spinner",{attrs:{label:"Waiting...",variant:"info",type:"grow"}}),n("p",{staticClass:"pt-3 font-weight-bold text-muted"},[t._v("Invite a friend to join using the link below.")]),n("p",{staticClass:"link text-info"},[t._v(t._s(t.host)+"?game="+t._s(t.roomID))])],1):n("div",{staticClass:"d-inline-flex flex-column align-items-center"},[n("p",{staticClass:"h3 font-weight-bold text-muted"},[t._v("Welcome!")]),n("p",{staticClass:"pt-3 font-weight-bold text-muted"},[t._v(" This is the boxes game. "),n("br"),t._v(" Please choose grid size, "),n("br"),t._v(" enter your first name, and start. ")]),n("div",{staticClass:"d-flex align-items-center mt-3 mb-5"},[n("b-form-spinbutton",{attrs:{wrap:"",min:"5",max:"9",vertical:""},model:{value:t.cols,callback:function(e){t.cols=e},expression:"cols"}}),n("span",{staticClass:"mx-3 font-weight-bold"},[t._v("x")]),n("b-form-spinbutton",{attrs:{wrap:"",min:"5",max:"9",vertical:""},model:{value:t.rows,callback:function(e){t.rows=e},expression:"rows"}})],1),n("b-input-group",{staticClass:"d-inline-flex w-75"},[n("b-input",{attrs:{type:"text",placeholder:"First name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("b-button",{attrs:{variant:"outline-info"},on:{click:t.start}},[t._v(" Start ")]),t.nameError?n("b-form-invalid-feedback",{staticClass:"text-left ml-4",attrs:{state:!1}},[t._v(" First name is required ")]):t._e()],1)],1)]):2==t.player?n("div",{staticClass:"d-inline-flex flex-column align-items-center m-5"},[t.expired?n("div",[n("p",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(t.expired))]),n("b-button",{attrs:{variant:"outline-info",to:t.origin}},[t._v(" Start a new one ")])],1):n("div",[n("p",{staticClass:"h3 font-weight-bold text-muted"},[t._v("Welcome!")]),n("p",{staticClass:"pt-3 mt-3 mb-5 font-weight-bold text-muted"},[t._v(" This is the boxes game. "),n("br"),t._v(" Enter your first name and join. ")]),n("b-input-group",{staticClass:"d-inline-flex w-75"},[n("b-input",{attrs:{type:"text",placeholder:"First name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("b-button",{attrs:{variant:"outline-info"},on:{click:t.join}},[t._v(" Join ")]),t.nameError?n("b-form-invalid-feedback",{staticClass:"text-left ml-4",attrs:{state:!1}},[t._v(" First name is required ")]):t._e()],1)],1)]):t._e()],1)},i=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("ac1f"),n("841c"),n("25eb"),n("a9e3"),n("1276"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.cols&&t.rows?n("div",{staticClass:"d-inline-block",staticStyle:{width:"100%","max-width":"500px"}},[n("div",{staticClass:"mb-4 d-flex justify-content-between align-items-end"},[n("p",{staticClass:"font-weight-bold text-muted d-flex flex-column align-items-start"},[t.turn?n("span",{staticClass:"badge badge-info p-2"},[t._v(" Your move .. ")]):!t.turn&&t.winner?n("span",[t._v(" Winner: "),n("span",{staticClass:"badge badge-info p-2"},[t._v(t._s(t.winner))])]):t._e(),!t.turn&&t.winner&&t.winner==t.name?n("span",{staticClass:"text-left text-success font-weight-bold mt-2"},[t._v(" WooHoo! "),n("br"),t._v(" You won. ")]):t._e(),!t.turn&&t.winner&&t.winner!=t.name?n("span",{staticClass:"text-left text-danger font-weight-bold mt-2"},[t._v(" Booo! "),n("br"),t._v(" You lost. ")]):t._e()]),n("div",{staticClass:"d-flex flex-column justify-content-start align-items-end"},t._l(t.scores,(function(e,o){return n("p",{key:o,staticClass:"font-weight-bold text-muted btn m-0 p-0 d-inline-block text-left"},[n("span",{staticClass:"badge badge-secondary rounded-0 px-3 py-2",staticStyle:{width:"100px"}},[t._v(t._s(o))]),n("span",{staticClass:"badge badge-info  px-3 py-2"},[n("span",{staticClass:"h5 font-weight-bold"},[t._v(t._s(e))])])])})),0)]),t._l(2*t.rows+1,(function(e){return n("div",{key:e,staticClass:"d-flex"},t._l(2*t.cols+1,(function(o){return n("div",{key:o,staticClass:"d-flex",class:{"flex-grow-1":o%2==0}},[e%2!=0&&o%2!=0?n("div",{staticClass:"border border-secondary rounded-circle bg-secondary",staticStyle:{width:"10px",height:"10px"}}):e%2!=0&&o%2==0?n("div",{ref:o+"-"+e,refInFor:!0,staticClass:"mark border border-light bg-light flex-grow-1",class:{line:t.turn},staticStyle:{width:"10px"},attrs:{id:o+"-"+e},on:{click:function(n){return t.markX(o,e)}}}):e%2==0&&o%2!=0?n("div",{ref:o+"-"+e,refInFor:!0,staticClass:"mark border border-light bg-light",class:{line:t.turn},staticStyle:{height:"50px",width:"10px"},attrs:{id:o+"-"+e},on:{click:function(n){return t.markY(o,e)}}}):e%2==0&&o%2==0?n("div",{ref:o+"-"+e,refInFor:!0,staticClass:"m-auto box font-weight-bold",staticStyle:{width:"30px"},attrs:{id:o+"-"+e,state:0}}):t._e()])})),0)}))],2):t._e()}),l=[],c={name:"Box",props:["cols","rows","player","socket","roomID","name"],data:function(){return{turn:!1,scores:{},winner:null}},mounted:function(){var t=this;1==this.player&&(this.turn=!0),this.socket.on("markedX",(function(e){if(e.row>1){var n=t.$refs[e.col+"-"+(e.row-1)][0];n.setAttribute("state",parseInt(n.getAttribute("state"))+1),4==parseInt(n.getAttribute("state"))&&(n.innerText=e.name.charAt(0),t.addScore(e.name))}if(e.row<2*t.rows+1){var o=t.$refs[e.col+"-"+(e.row+1)][0];o.setAttribute("state",parseInt(o.getAttribute("state"))+1),4==parseInt(o.getAttribute("state"))&&(o.innerText=e.name.charAt(0),t.addScore(e.name))}t.$refs[e.col+"-"+e.row][0].setAttribute("active",!0),t.turn=!t.turn})),this.socket.on("markedY",(function(e){if(e.col>1){var n=t.$refs[e.col-1+"-"+e.row][0];n.setAttribute("state",parseInt(n.getAttribute("state"))+1),4==parseInt(n.getAttribute("state"))&&(n.innerText=e.name.charAt(0),t.addScore(e.name))}if(e.col<2*t.cols+1){var o=t.$refs[e.col+1+"-"+e.row][0];o.setAttribute("state",parseInt(o.getAttribute("state"))+1),4==parseInt(o.getAttribute("state"))&&(o.innerText=e.name.charAt(0),t.addScore(e.name))}t.$refs[e.col+"-"+e.row][0].setAttribute("active",!0),t.turn=!t.turn})),this.socket.on("winner",(function(e){t.winner||(t.winner=e.name,t.turn=!1)}))},methods:{addScore:function(t){this.scores[t]?this.scores[t]+=1:this.scores[t]=1,this.scores[t]>this.cols*this.rows/2&&this.win(t)},win:function(t){this.socket.emit("win",{roomID:this.roomID,name:t})},markX:function(t,e){this.turn&&!this.$refs[t+"-"+e][0].hasAttribute("active")&&this.socket.emit("markX",{col:t,row:e,roomID:this.roomID,name:this.name})},markY:function(t,e){this.turn&&!this.$refs[t+"-"+e][0].hasAttribute("active")&&this.socket.emit("markY",{col:t,row:e,roomID:this.roomID,name:this.name})}}},u=c,d=(n("7984"),n("2877")),f=Object(d["a"])(u,a,l,!1,null,null,null),m=f.exports,p={name:"App",components:{Box:m},data:function(){return{host:"192.168.1.11:3000",name:null,nameError:null,cols:5,rows:5,socket:null,roomID:null,joined:0,origin:location.origin,expired:null,player:1}},mounted:function(){var t=new URLSearchParams(location.search);if(t.get("game")){var e=t.get("game");this.cols=Number.parseInt(e.split("-")[0]),this.rows=Number.parseInt(e.split("-")[1]),this.roomID=e,this.player=2,this.joined=1}},methods:{start:function(){var t=this;this.name?(this.nameError=!1,this.socket=io.connect(this.host+"/games"),this.socket.on("connect",(function(){console.log("Connected to server."),t.socket.emit("createRoom",{cols:t.cols,rows:t.rows})})),this.socket.on("roomCreated",(function(e){console.log("Room created: ",e),t.roomID=e,t.socket.emit("join",t.roomID)})),this.socket.on("joined",(function(){t.joined++,console.log("Joined room ",t.roomID)}))):this.nameError=!0},join:function(){var t=this;this.name?(this.nameError=!1,this.socket=io(this.host+"/games"),this.socket.on("connect",(function(){console.log("Connected to server."),t.socket.emit("join",t.roomID)})),this.socket.on("joined",(function(){t.joined++,console.log("Joined room ",t.roomID)})),this.socket.on("joinError",(function(e){t.expired=e}))):this.nameError=!0}}},h=p,b=(n("034f"),Object(d["a"])(h,r,i,!1,null,null,null)),v=b.exports;o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(v)}}).$mount("#app")},7984:function(t,e,n){"use strict";n("2506")},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.58240985.js.map